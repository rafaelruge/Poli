import{a as Q}from"./chunk-ZFGCV4GS.js";import{c as B,e as J,i as U,j as $,k as q,m as H}from"./chunk-AHCHQWXB.js";import{a as K}from"./chunk-XC3RBIPI.js";import{$ as T,A as y,C as f,E as t,F as i,G as k,J as P,K as _,L as S,M as N,N as n,O as d,Q as R,R as F,S as A,U as G,aa as V,ba as L,da as z,fa as j,ga as W,ia as D,j as C,n as p,o as u,t as s,v as w,w as l,x as h}from"./chunk-EBSKGQ7D.js";var b=class o{constructor(a){this.authService=a}user;ngOnInit(){this.user=this.authService.getUser()}static \u0275fac=function(e){return new(e||o)(w(K))};static \u0275cmp=l({type:o,selectors:[["app-dashboard"]],standalone:!1,decls:13,vars:0,consts:[[1,"admin-layout"],[1,"sidebar"],["routerLink","gestionar","routerLinkActive","active"],["routerLink","estadisticas","routerLinkActive","active"],["routerLink","rutas","routerLinkActive","active"],[1,"content"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"aside",1)(2,"h3"),n(3,"Panel Admin"),i(),t(4,"nav")(5,"a",2),n(6,"\u{1F4C4} Solicitudes"),i(),t(7,"a",3),n(8,"\u{1F4CA} Estad\xEDsticas"),i(),t(9,"a",4),n(10,"\u{1F69B} Rutas"),i()()(),t(11,"main",5),k(12,"router-outlet"),i()())},dependencies:[z,j,W],styles:[".admin-layout[_ngcontent-%COMP%]{display:flex;min-height:80vh}.admin-layout[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{width:220px;background-color:#275d2b;color:#fff;padding:1rem}.admin-layout[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem}.admin-layout[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:#fff;text-decoration:none;margin:.5rem 0;font-weight:500}.admin-layout[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .admin-layout[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.admin-layout[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex:1;padding:2rem;background:#f9f9f9}"]})};function Y(o,a){if(o&1){let e=P();t(0,"tr")(1,"td"),n(2),i(),t(3,"td"),n(4),i(),t(5,"td"),n(6),i(),t(7,"td"),n(8),i(),t(9,"td"),n(10),i(),t(11,"td"),n(12),i(),t(13,"td")(14,"button",11),_("click",function(){let c=p(e).$implicit,m=S(2);return u(m.actualizarEstado(c.id,"aprobada"))}),n(15," Aprobar "),i(),t(16,"button",11),_("click",function(){let c=p(e).$implicit,m=S(2);return u(m.actualizarEstado(c.id,"rechazada"))}),n(17," Rechazar "),i()()()}if(o&2){let e=a.$implicit,r=a.index;s(2),d(r+1),s(2),d(e.nombre),s(2),d(e.email),s(2),d(e.fecha),s(2),d(e.tipo),s(2),d(e.estado),s(2),f("disabled",e.estado!=="pendiente"),s(2),f("disabled",e.estado!=="pendiente")}}function Z(o,a){if(o&1&&(t(0,"table")(1,"thead")(2,"tr")(3,"th"),n(4,"#"),i(),t(5,"th"),n(6,"Nombre"),i(),t(7,"th"),n(8,"Correo"),i(),t(9,"th"),n(10,"Fecha"),i(),t(11,"th"),n(12,"Tipo"),i(),t(13,"th"),n(14,"Estado"),i(),t(15,"th"),n(16,"Acciones"),i()()(),t(17,"tbody"),y(18,Y,18,8,"tr",10),i()()),o&2){let e=S();s(18),f("ngForOf",e.solicitudesFiltradas)}}function tt(o,a){o&1&&(t(0,"p"),n(1,"No hay solicitudes registradas en este estado."),i())}var x=class o{solicitudes=[];solicitudesFiltradas=[];estadoSeleccionado="todos";ngOnInit(){this.cargarSolicitudes()}cargarSolicitudes(){let a=localStorage.getItem("solicitudes");this.solicitudes=a?JSON.parse(a):[],this.filtrarSolicitudes()}filtrarSolicitudes(){this.estadoSeleccionado==="todos"?this.solicitudesFiltradas=[...this.solicitudes]:this.solicitudesFiltradas=this.solicitudes.filter(a=>a.estado===this.estadoSeleccionado)}actualizarEstado(a,e){let r=this.solicitudes.findIndex(c=>c.id===a);r!==-1&&this.solicitudes[r].estado==="pendiente"&&(this.solicitudes[r].estado=e,localStorage.setItem("solicitudes",JSON.stringify(this.solicitudes)),this.filtrarSolicitudes())}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=l({type:o,selectors:[["app-gestionar-solicitudes"]],standalone:!1,decls:19,vars:3,consts:[["sinSolicitudes",""],[1,"filtro"],["for","filtroEstado"],["id","filtroEstado",3,"ngModelChange","change","ngModel"],["value","todos"],["value","pendiente"],["value","aprobada"],["value","rechazada"],["value","cancelada"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"click","disabled"]],template:function(e,r){if(e&1){let c=P();t(0,"h2"),n(1,"Gesti\xF3n de Solicitudes"),i(),t(2,"div",1)(3,"label",2),n(4,"Filtrar por estado:"),i(),t(5,"select",3),A("ngModelChange",function(O){return p(c),F(r.estadoSeleccionado,O)||(r.estadoSeleccionado=O),u(O)}),_("change",function(){return p(c),u(r.filtrarSolicitudes())}),t(6,"option",4),n(7,"Todos"),i(),t(8,"option",5),n(9,"Pendiente"),i(),t(10,"option",6),n(11,"Aprobada"),i(),t(12,"option",7),n(13,"Rechazada"),i(),t(14,"option",8),n(15,"Cancelada"),i()()(),y(16,Z,19,1,"table",9)(17,tt,2,0,"ng-template",null,0,G)}if(e&2){let c=N(18);s(5),R("ngModel",r.estadoSeleccionado),s(11),f("ngIf",r.solicitudesFiltradas.length>0)("ngIfElse",c)}},dependencies:[T,V,$,q,U,B,J],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:1rem}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:.75rem;text-align:left}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#275d2b;color:#fff}table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:.5rem;padding:.3rem .8rem;border:none;border-radius:4px;cursor:pointer}table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{background-color:#3ba935;color:#fff}table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background-color:#d9534f;color:#fff}table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}"]})};var M=class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=l({type:o,selectors:[["app-estadisticas"]],standalone:!1,decls:2,vars:0,template:function(e,r){e&1&&(t(0,"p"),n(1,"estadisticas works!"),i())},encapsulation:2})};var v=class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=l({type:o,selectors:[["app-rutas-recoleccion"]],standalone:!1,decls:2,vars:0,template:function(e,r){e&1&&(t(0,"p"),n(1,"rutas-recoleccion works!"),i())},encapsulation:2})};var et=[{path:"",component:b,canActivate:[Q],data:{rol:"admin"},children:[{path:"",redirectTo:"gestionar",pathMatch:"full"},{path:"gestionar",component:x},{path:"estadisticas",component:M},{path:"rutas",component:v}]}],E=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=h({type:o});static \u0275inj=C({imports:[D.forChild(et),D]})};var X=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=h({type:o});static \u0275inj=C({imports:[L,E,H]})};export{X as AdminModule};
